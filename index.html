<!DOCTYPE html>
<html lang="lb">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>P2 – D’Schoulsaachen – Spiller</title>

<style>
@font-face{
  font-family:'Schoulschrëft';
  src:url('https://raw.githubusercontent.com/albrechtclaire1007/schoulschreft/main/schoulschreft_bold%5B2%5D.TTF') format('truetype');
  font-weight:bold;
}

:root{
  --green-light:#d8ebd4;
  --green-mid:#8cc987;
  --green-dark:#4f9c72;

  --ink:#183525;
  --white:#fff;
  --ok:#b7f0c8;
  --bad:#ffcccc;
  --border:3px;
}

*{box-sizing:border-box; user-select:none;}
html,body{
  margin:0; height:100%;
  font-family:'Schoulschrëft', Arial, sans-serif;
  background:linear-gradient(135deg,var(--green-light),var(--green-mid));
}

.top{
  position:sticky; top:8px; z-index:10;
  display:flex; gap:12px; justify-content:center; align-items:center;
  background:#fff; border:3px solid var(--green-dark);
  border-radius:18px; padding:.35rem .8rem; margin:10px auto;
  width:fit-content;
}

.iconBtn{
  font-size:1.4rem; border:3px solid var(--ink);
  background:#fff; border-radius:14px; cursor:pointer;
  padding:.25rem .7rem;
}

.hidden{display:none!important;}

.wrap{
  min-height:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:2rem;
  padding:2rem;
}

h1{font-size:clamp(2rem,5vw,3.5rem); text-align:center;}

.grid{
  width:95vw; max-width:1400px;
  display:grid; gap:1.5rem;
  grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
}

.imgToken{
  background:#fff;
  border:6px solid var(--green-mid);
  border-radius:22px;
  aspect-ratio:1/1;
  display:grid;
  place-items:center;
  cursor:pointer;
}

.imgToken img{width:85%; height:85%; object-fit:contain;}

.flash-good{background:var(--ok)!important;}
.flash-bad{background:var(--bad)!important;}

.soundBtn{
  width:72px; height:54px;
  border:3px solid var(--ink);
  border-radius:16px;
  background:#fff;
  cursor:pointer;
}
.soundBtn img{width:90%; height:90%; object-fit:contain;}

.bigBox{
  width:min(52vmin,80%);
  aspect-ratio:1/1;
  border:10px solid var(--green-mid);
  border-radius:32px;
  background:#fff;
  display:grid;
  place-items:center;
}

.bigBox img{width:65%; height:65%; object-fit:contain;}

.slots,.letters{
  display:flex;
  gap:.6rem;
  flex-wrap:wrap;
  justify-content:center;
}

.slot{
  min-width:3rem;
  min-height:3.8rem;
  border-bottom:6px solid var(--ink);
  font-size:2.4rem;
  display:grid;
  place-items:center;
}

.letter{
  border:4px solid var(--ink);
  border-radius:12px;
  padding:.3rem .6rem;
  font-size:2.2rem;
  cursor:pointer;
  background:#fff;
}

.btn{
  border:3px solid var(--ink);
  background:#fff;
  border-radius:14px;
  padding:.45rem .9rem;
  cursor:pointer;
  font-family:'Schoulschrëft';
}

.memGrid{
  display:grid;
  gap:1.2rem;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  width:95vw;
}

.card{
  aspect-ratio:5/3;
  perspective:1000px;
  cursor:pointer;
}

.inner{
  position:relative;
  width:100%;
  height:100%;
  transition:.3s;
  transform-style:preserve-3d;
}

.flipped .inner{transform:rotateY(180deg);}

.face{
  position:absolute;
  inset:0;
  border-radius:18px;
  border:6px solid var(--green-mid);
  background:#fff;
  display:grid;
  place-items:center;
  backface-visibility:hidden;
}

.front{
  background:#fff url('https://i.postimg.cc/gnrf0LLw/cardback-p2.png') center/70% no-repeat;
}

.back{transform:rotateY(180deg);}

.sortLayout{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:1rem;
  width:95vw;
}

.dropCol{
  background:#fff;
  border:10px solid var(--green-mid);
  border-radius:26px;
  padding:1rem;
  display:flex;
  flex-direction:column;
  align-items:center;
}

.dropInner{
  display:flex;
  flex-wrap:wrap;
  gap:.5rem;
  justify-content:center;
}

.sortItem{
  width:70px; height:70px;
  border:5px solid var(--green-mid);
  border-radius:18px;
  background:#fff;
  cursor:pointer;
  display:grid;
  place-items:center;
}
.sortItem img{width:85%; height:85%; object-fit:contain;}
</style>
</head>

<body>

<div class="top">
  <button class="iconBtn" id="prev">◀</button>
  <span id="flowLabel">1. Spill</span>
  <button class="iconBtn" id="next">▶</button>
</div>

<!-- GAME 1 -->
<section class="wrap" id="g1">
  <h1>Lauschter a klick</h1>
  <div class="grid" id="grid1"></div>
  <button class="soundBtn" id="play1">
    <img src="https://i.postimg.cc/ZqG1TRbC/lauschter-p2.png">
  </button>
</section>

<!-- GAME 2 -->
<section class="wrap hidden" id="g2">
  <h1>Schreif d’Wuert</h1>
  <div class="bigBox"><img id="spellImg"></div>
  <div class="slots" id="spellSlots"></div>
  <div class="letters" id="spellLetters"></div>
  <div style="display:flex; gap:1rem;">
    <button class="btn" id="spellReset">↻ Reset</button>
    <button class="btn" id="spellNext">Weider</button>
  </div>
</section>

<!-- GAME 3 -->
<section class="wrap hidden" id="g3">
  <h1>Memory</h1>
  <div class="memGrid" id="memGrid"></div>
</section>

<!-- GAME 4 -->
<section class="wrap hidden" id="g4">
  <h1>Sortéier no Genre</h1>
  <div class="sortLayout">
    <div class="dropCol" data-cat="masc">
      <img src="https://i.postimg.cc/MvXhGffV/mannlech.png" width="160">
      <div class="dropInner"></div>
    </div>
    <div class="dropCol" data-cat="fem">
      <img src="https://i.postimg.cc/7fbpLJJz/weiblech.png" width="160">
      <div class="dropInner"></div>
    </div>
    <div class="dropCol" data-cat="neut">
      <img src="https://i.postimg.cc/3dWPw00g/sachlech.png" width="160">
      <div class="dropInner"></div>
    </div>
  </div>
  <div class="letters" id="sortPool"></div>
</section>

<audio id="speaker"></audio>

<script>
const AUDIO="https://github.com/albrechtclaire1007/p2schoulsaachen/raw/refs/heads/main/";

const ITEMS=[
 {id:'blaisteft',word:"Bläistëft",img:'https://i.postimg.cc/5YJ7PXCx/blaisteft.png',audio:'P2__blaisteft.mp3',g:'masc'},
 {id:'blaisteftsfaarf',word:"Bläistëftsfaarf",img:'https://i.postimg.cc/rdxZC1K8/blaisteftsfaarwen.png',audio:'P2__Blaisteftsfaarf.mp3',g:'fem'},
 {id:'buch',word:"Buch",img:'https://i.postimg.cc/R6msPWHv/buch.png',audio:'P2__Buch.mp3',g:'neut'},
 {id:'classeur',word:"Classeur",img:'https://i.postimg.cc/5HLKqB6d/classeur.png',audio:'P2__Classeur.mp3',g:'masc'},
 {id:'gummi',word:"Gummi",img:'https://i.postimg.cc/gXpSMxZd/gummi.png',audio:'P2__Gummi.mp3',g:'masc'},
 {id:'heft',word:"Heft",img:'https://i.postimg.cc/NymC765s/heft.png',audio:'P2__Heft.mp3',g:'neut'},
 {id:'lineal',word:"Lineal",img:'https://i.postimg.cc/r0TnhDrT/lineal.png',audio:'P2__Lineal.mp3',g:'masc'},
 {id:'pech',word:"Pech",img:'https://i.postimg.cc/1nSCW8qq/pech.png',audio:'P2__Pech.mp3',g:'masc'},
 {id:'schachtel',word:"Schachtel",img:'https://i.postimg.cc/rDvYrnyn/schachtel.png',audio:'P2__Schachtel.mp3',g:'fem'},
 {id:'scheier',word:"Schéier",img:'https://i.postimg.cc/ZBm7fWdN/scheier.png',audio:'P2__Scheier.mp3',g:'fem'},
 {id:'schoulsak',word:"Schoulsak",img:'https://i.postimg.cc/cKwkMR65/schoulsak.png',audio:'P2__Schoulsak.mp3',g:'masc'},
 {id:'schwamm',word:"Schwamm",img:'https://i.postimg.cc/9D4nz5hs/schwamp.png',audio:'P2__Schwamm.mp3',g:'masc'},
 {id:'spetzer',word:"Spëtzer",img:'https://i.postimg.cc/BjdwKYZV/spetzer.png',audio:'P2__Spetzer.mp3',g:'masc'},
 {id:'tafel',word:"Tafel",img:'https://i.postimg.cc/VJ3HCGsT/tafel.png',audio:'P2__Tafel.mp3',g:'fem'},
 {id:'tuschfaarf',word:"Tuschfaarf",img:'https://i.postimg.cc/McV3b7vp/tuschfaarwen.png',audio:'P2__Tuschfaarf.mp3',g:'fem'}
];

const speaker=document.getElementById('speaker');
const pages=['g1','g2','g3','g4']; let p=0;

function play(a){speaker.src=AUDIO+a; speaker.play();}
function shuffle(a){return a.sort(()=>Math.random()-.5);}

document.getElementById('prev').onclick=()=>show(p-1);
document.getElementById('next').onclick=()=>show(p+1);

function show(i){
 p=Math.max(0,Math.min(pages.length-1,i));
 pages.forEach((id,n)=>document.getElementById(id).classList.toggle('hidden',n!==p));
 document.getElementById('flowLabel').textContent=(p+1)+'. Spill';
}

/* GAME 1 */
const grid=document.getElementById('grid1');
let bag=shuffle([...ITEMS]),target;

ITEMS.forEach(it=>{
 const b=document.createElement('div');
 b.className='imgToken';
 b.innerHTML=`<img src="${it.img}">`;
 b.onclick=()=>{if(it===target){b.classList.add('flash-good'); next();}else b.classList.add('flash-bad');};
 grid.appendChild(b);
});
function next(){target=bag.pop(); if(target) play(target.audio);}
document.getElementById('play1').onclick=()=>target&&play(target.audio);
next();

/* GAME 2 */
let spellBag=shuffle([...ITEMS]),cur;
const slots=document.getElementById('spellSlots');
const letters=document.getElementById('spellLetters');
const img=document.getElementById('spellImg');

function buildSpell(){
 cur=spellBag.pop(); if(!cur){spellBag=shuffle([...ITEMS]); buildSpell(); return;}
 img.src=cur.img;
 slots.innerHTML=''; letters.innerHTML='';
 [...cur.word].forEach(()=>slots.appendChild(document.createElement('div'))).forEach(s=>s.className='slot');
 shuffle([...cur.word]).forEach(ch=>{
  const l=document.createElement('div');
  l.className='letter'; l.textContent=ch;
  l.onclick=()=>{const e=[...slots.children].find(s=>!s.textContent); if(e){e.textContent=ch; l.remove(); check();}};
  letters.appendChild(l);
 });
}
function check(){
 if([...slots.children].map(s=>s.textContent).join('')===cur.word) setTimeout(buildSpell,600);
}
document.getElementById('spellNext').onclick=buildSpell;
document.getElementById('spellReset').onclick=buildSpell;
buildSpell();

/* GAME 3 MEMORY */
const mem=document.getElementById('memGrid');
shuffle(ITEMS.slice(0,8).flatMap(it=>[{it,t:'i'},{it,t:'a'}])).forEach(c=>{
 const card=document.createElement('div'); card.className='card';
 card.innerHTML=`<div class="inner">
 <div class="face front"></div>
 <div class="face back">${c.t==='i'?`<img src="${c.it.img}" width="80%">`:`${c.it.word}`}</div>
 </div>`;
 card.onclick=()=>{card.classList.toggle('flipped'); if(c.t==='a') play(c.it.audio);};
 mem.appendChild(card);
});

/* GAME 4 SORT */
const pool=document.getElementById('sortPool');
ITEMS.forEach(it=>{
 const b=document.createElement('div');
 b.className='sortItem'; b.innerHTML=`<img src="${it.img}">`;
 b.onclick=()=>document.querySelector(`[data-cat="${it.g}"] .dropInner`).appendChild(b);
 pool.appendChild(b);
});
</script>

</body>
</html>

